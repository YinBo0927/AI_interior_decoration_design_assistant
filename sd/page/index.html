<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.tailwindcss.com"></script>
    <title>AIstinct</title>
    
  </head>
  <body>
    <div class="flex h-screen">
  
  <div class="w-1/4 bg-zinc-900 text-white p-4">
    <div class="flex justify-between items-center mb-4">
      <button class="flex items-center p-2 border-2 border-zinc-800 hover:bg-zinc-800 rounded cursor-pointer">+ 新建聊天</button>
    </div>
    <div class="mb-4">
      <div class="flex items-center justify-between p-2 bg-zinc-800 rounded">
        <span>对话一</span>
        <span>✔️</span>
      </div>
    </div>
    <ul class="space-y-2">
      <li class="flex items-center p-2 hover:bg-zinc-800 rounded cursor-pointer">
        <span>虚假的对话二</span>
      </li>
      <li class="flex items-center p-2 hover:bg-zinc-800 rounded cursor-pointer">
        <span>占位对话三</span>
      </li>
      <li class="flex items-center p-2 hover:bg-zinc-800 rounded cursor-pointer">
        <span>对话四</span>
      </li>
      <li class="flex items-center p-2 hover:bg-zinc-800 rounded cursor-pointer">
        <span>对话五</span>
      </li>
      <li class="flex items-center p-2 hover:bg-zinc-800 rounded cursor-pointer">
        <span>这是对话六</span>
      </li>
    </ul>
  </div>
  
  <div class="flex-1 flex flex-col bg-zinc-800 text-white">
    
    <div class="flex items-center justify-between p-4 bg-zinc-900">
      <span>AIstinct - Your Interior Design Assistant</span>
      <div class="flex items-center space-x-2">
        <button class="flex items-center p-2 border-2 border-zinc-800 hover:bg-zinc-800 rounded cursor-pointer">⚙️</button>
      </div>
    </div>

<div id="chat-container" class="flex-1 overflow-y-auto p-4 space-y-4">
  <div class="flex items-start space-x-2">
    <div class="bg-zinc-700 p-4 rounded w-full">
      <div class="flex items-center space-x-2 mb-2">
        <img src="./profile/logo24.png" alt="bot" class="rounded-full">
        <span>AInstinct</span>
      </div>
      <div class="flex items-center space-x-2 mb-2">
        <span>这是对话的开头,ai发言...</span>
      </div>
    </div>
  </div>
  <div class="flex items-start space-x-2">
    <div class="bg-zinc-700 p-4 rounded w-full">
      <div class="flex items-center space-x-2 mb-2">
        <img src="./profile/user24.png" alt="user" class="rounded-full">
        <span>User</span>
      </div>
      <div class="flex items-center space-x-2 mb-2">
        <span>还是一句占位对话,用户发言</span>
      </div>
    </div>
  </div>
  <div class="flex items-start space-x-2">
    <div class="bg-zinc-700 p-4 rounded w-full">
      <div class="flex items-center space-x-2 mb-2">
        <img src="./profile/logo24.png" alt="bot" class="rounded-full">
        <span>AInstinct</span>
      </div>
      <div class="flex items-center space-x-2 mb-2">
        <img src="1.png" alt="bot">
      </div>
      <div class="flex items-center space-x-2 mb-2">
        <span>好的，让我们开始...</span>
      </div>
      <p>...</p>
    </div>
  </div>
</div>


<div class="p-4 bg-zinc-900 flex items-center space-x-2">
  <input id="user-input" type="text" placeholder="输入一条消息或键入 '/' 以选择提示..." class="flex-1 p-2 rounded bg-zinc-700 text-white">
  <button id="api-button" class="flex items-center p-2 border-2 border-zinc-800 hover:bg-zinc-800 rounded cursor-pointer"><svg t="1717915515617" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5332" width="24" height="24"><path d="M959.667298 800.651143l-33.843806-157.556409c-0.064468-0.224104 0-0.388856-0.029676-0.587378l-2.611477-10.637268c-1.434675-5.9055-5.15644-10.539031-9.918907-13.248745-4.767584-2.804882-10.638291-3.686972-16.416901-1.956561l-10.538007 3.067872c-0.164752 0.029676-0.328481 0.163729-0.557702 0.25992L729.110271 669.726278c-11.618619 3.362584-18.664082 15.634072-15.829524 27.412326l2.64627 8.879228c2.838651 11.743462 17.358343 15.370059 28.976962 12.006452l100.167351-32.18912c-2.316765 4.496407-4.728698 8.943696-7.227612 13.325493-50.845015 89.318258-137.646963 153.181775-238.125399 175.209464-94.868671 20.790512-225.597061 3.428076-307.410392-48.981574-81.779561-52.344159-137.517003-136.410809-158.308539-231.274364-3.551896-16.152888-19.510356-26.4013-35.668361-22.844288-16.152888 3.527336-26.400277 19.515473-22.809495 35.669384 24.178679 110.532419 89.252767 207.876468 184.510294 268.90031 95.257527 60.993143 242.041592 81.256652 352.540242 57.046251 116.955712-25.683962 218.022549-100.089579 277.32212-204.126051 0.652869-1.154289 1.288343-2.320858 1.932002-3.479241l18.071587 85.813434c2.870374 11.782348 14.618952 18.568914 26.237571 15.140839l8.384971-0.876973C956.17373 821.927725 962.502879 812.369022 959.667298 800.651143L959.667298 800.651143zM96.961844 395.962194l2.610454 10.654664c1.439792 5.90857 5.15644 10.525728 9.924024 13.252839 4.76349 2.787486 10.637268 3.669576 16.412808 1.957585l10.507308-3.086291c0.199545-0.029676 0.358157-0.177032 0.557702-0.2415l156.64055-49.751101c11.618619-3.393283 18.697851-15.634072 15.859199-27.41335l-2.871397-7.978718c-2.870374-11.747555-17.134239-16.300244-28.717042-12.906961l-100.582813 32.301683c5.130857-11.68411 10.870582-23.094998 17.173125-34.111912 50.90539-89.366354 136.895857-150.277632 237.309824-172.304298 94.863555-20.790512 225.595015-3.41068 307.374576 48.997947 81.814354 52.361555 138.299833 133.48927 159.121044 228.386594 3.558036 16.153912 19.48068 26.350135 35.668361 22.810518 11.294231-2.482541 19.709901-11.048637 22.485107-21.50478 1.206478-4.473895 1.404999-9.30083 0.323365-14.164604-24.213471-110.51093-90.030479-204.973348-185.288007-265.961374-95.291297-61.011562-242.045685-81.261769-352.543312-57.029878-116.891244 25.618471-217.210044 97.05036-276.470729 201.085808-4.179183 7.325849-8.151657 14.809287-11.908214 22.416546l-17.690918-84.010369c-2.905166-11.765975-13.900591-21.262256-25.51921-17.868973l-8.385994 0.916882c-11.618619 3.429099-18.697851 15.69547-15.859199 27.412326l33.805944 157.552316C96.996636 395.58664 96.896352 395.767765 96.961844 395.962194L96.961844 395.962194zM96.961844 395.962194" fill="#ffffff" p-id="5333"></path></svg> </button>
  <button id="send-button" class="flex items-center p-2 border-2 border-zinc-800 hover:bg-zinc-800 rounded cursor-pointer"><svg t="1717915246671" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4255" data-spm-anchor-id="a313x.search_index.0.i0.f9d53a81HLqTSk" width="24" height="24"><path d="M0 1024l106.496-474.112 588.8-36.864-588.8-39.936L0 0l1024 512z" fill="#ffffff" p-id="4256" data-spm-anchor-id="a313x.search_index.0.i1.f9d53a81HLqTSk" class="selected"></path></svg></button>
</div>
  </div>
</div>
<script>
  document.getElementById('send-button').addEventListener('click', function() {
      // 获取用户输入
      var userInput = document.getElementById('user-input').value;

      // 创建新的聊天气泡
      var chatBubble = document.createElement('div');
      chatBubble.className = 'flex items-start space-x-2';

      var bubbleContent = `
          <div class="bg-zinc-700 p-4 rounded w-full">
              <div class="flex items-center space-x-2 mb-2">
                  <img src="https://placehold.co/24x24" alt="user" class="rounded-full">
                  <span>${userInput}</span>
              </div>
          </div>
      `;
      chatBubble.innerHTML = bubbleContent;

      // 将新的聊天气泡添加到聊天框
      document.getElementById('chat-container').appendChild(chatBubble);

      // 清空输入框
      document.getElementById('user-input').value = '';
  });
</script>
<script>
  document.getElementById('api-button').addEventListener('click', function() {
      var requestData = {
          "override_settings": {
              "sd_model_checkpoint": "xsarchitectural_v11.ckpt [631eea1a0e]",
          },
          "prompt": "<lora:FT_lora:1>, a kitchen with a stove, sink, and a window in its center area with a view of the city, Cui Bai, finely detailed features, a digital rendering, modern european ink painting, Kitchen",
          "negative_prompt": "text, word, cropped, low quality, normal quality, username, watermark, signature, blurry, soft, soft line, curved line, sketch, ugly, logo, pixelated, lowres, nsfw",
          "steps": 30,
          "seed": -1,
          "width": 720,
          "height": 480,
      };

      fetch('/call_python_function', {
          method: 'POST',
          headers: {
              'Content-Type': 'application/json'
          },
          body: JSON.stringify(requestData)
      })
      .then(response => response.json())
      .then(data => {
          // 确保data.result存在
          if (data.result) {
              var chatBubble = document.createElement('div');
              chatBubble.className = 'flex items-start space-x-2';

              var bubbleContent = `
                  <div class="bg-zinc-700 p-4 rounded w-full">
                      <div class="flex items-center space-x-2 mb-2">
                        <img src="./profile/logo24.png" alt="bot" class="rounded-full">
                        <span>AInstinct</span>
                      </div>
                      <div class="flex items-center space-x-2 mb-2">
                        <img id="chat-img" src="${data.result}" alt="bot">
                      </div>
                      <div class="flex items-center space-x-2 mb-2">
                        <span>接收成功!!!</span>
                      </div>
                      <p> AIstinct </p>
                  </div>
              `;
              chatBubble.innerHTML = bubbleContent;

              document.getElementById('chat-container').appendChild(chatBubble);

              // 滚动到新内容处
              chatBubble.scrollIntoView({ behavior: 'smooth', block: 'end' });

          } else {
              console.error('Response does not contain result:', data);
          }
      })
      .catch(error => console.error('Error:', error));
  });
</script>
 
  </body>
</html>